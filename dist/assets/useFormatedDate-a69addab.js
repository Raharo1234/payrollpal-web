import{i,r as D,k as h,R as m,j as _}from"./index-aadf72d3.js";const w=async t=>{try{return await i.get(`/freelance/dayValidity/${t}`)}catch(e){throw e}},E=async t=>{try{return await i.get(`/freelance/allDayValidity/${t}`)}catch(e){throw e}},f=async t=>{try{return await i.get(`/freelance/${t}`)}catch(e){throw e}},M=async t=>{try{return await i.post("/freelance/depositDayValidity",t)}catch(e){throw e}},y="FETCH_DAY_DUMP_IN_THIS_MONTH",p="FETCH_ALL_DAY_DUMP",d="FETCH_PLACEMENT_BY_FREELANCE_ID",l="DEPOSIT_DAYDUMP",T=async(t,e)=>{var a;try{const s=(a=(await f(e)).data)==null?void 0:a.result;return t({type:d,payload:s}),s}catch(r){throw r}},A=async(t,e)=>{try{const a=await w(e);t({type:y,payload:a.data.result})}catch(a){throw a}},I=async(t,e)=>{try{const a=await E(e);t({type:p,payload:a.data.result})}catch(a){throw a}},F=async(t,e)=>{var a;try{const r=await M(e);t({type:l,payload:(a=r.data)==null?void 0:a.result})}catch(r){throw r}},S=(t,e)=>{var a;switch(e.type){case d:return{...t,placement:e.payload};case p:return{...t,alldayDump:e.payload};case y:return{...t,nbrDeJours:((a=e.payload)==null?void 0:a.nbrDeJours)||0,isDepositDayInThisMonth:!!e.payload};case l:return{...t,nbrDeJours:e.payload.nbrDeJours,isDepositDayInThisMonth:!!e.payload};default:return t}},P={nbrDeJours:0,isDepositDayInThisMonth:!1,placement:null,alldayDump:[]},u=D.createContext(),N=({children:t})=>{var n;const[e,a]=D.useReducer(S,P),{data:r}=h(),s=(n=r.infosUsers)==null?void 0:n._id;return m.useEffect(()=>{(async()=>{try{const o=await T(a,s);await A(a,o._id),await I(a,o._id)}catch(o){throw o}})()},[s,a]),_.jsx(u.Provider,{value:{dayDumpData:e,depositDayDump:c=>F(a,c)},children:t})},H=()=>D.useContext(u),O=(t=new Date().toISOString())=>{const e=new Date(t);if(isNaN(e.getTime()))throw new Error("Invalid date");const a=["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"],r=["Janvier","Février","Mars","Avril","Mai","Juin","Juillet","Août","Septembre","Octobre","Novembre","Décembre"],s=a[e.getDay()],n=e.getDate(),c=r[e.getMonth()],o=e.getFullYear();return`${s} ${n} ${c} ${o}`};export{N as D,O as a,H as u};
