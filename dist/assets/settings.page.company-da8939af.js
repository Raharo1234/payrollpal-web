import{j as e,s as C,u as v,R as u,C as o,L as P,k as V}from"./index-aadf72d3.js";import{M as b}from"./index-4cabefca.js";import"./warning-113e5435.js";const S=({user:t,onOpenEditModalCompany:r})=>e.jsxs("div",{className:"card",style:{maxWidth:"initial"},children:[e.jsxs("div",{className:"justify-space-between",children:[e.jsx("p",{className:"p-h2 text-black-start",children:"Entreprise"}),e.jsx("button",{className:"btn-secondary",style:{width:"auto"},onClick:r,children:"Edit"})]}),e.jsxs("div",{className:"column",style:{marginTop:"1rem"},children:[e.jsxs("div",{children:[e.jsx("p",{className:"p-h3",children:"Raison social"}),e.jsx("p",{className:"p text-black-start",children:t.raisonSocial})]}),e.jsxs("div",{children:[e.jsx("p",{className:"p-h3",children:"Adresse"}),e.jsx("p",{className:"p text-black-start",children:t.entrepriseAdresse})]}),e.jsxs("div",{children:[e.jsx("p",{className:"p-h3",children:"Code postal"}),e.jsx("p",{className:"p text-black-start",children:t.entrepriseCodePostal})]}),e.jsxs("div",{children:[e.jsx("p",{className:"p-h3",children:"Ville"}),e.jsx("p",{className:"p text-black-start",children:t.entrepriseVille})]})]})]}),E=({user:t,onOpenEditModalProfil:r})=>e.jsxs("div",{className:"card",style:{maxWidth:"initial"},children:[e.jsxs("div",{className:"justify-space-between",children:[e.jsx("p",{className:"p-h2 text-black-start",children:"Profil du réprésentant"}),e.jsx("button",{className:"btn-secondary",style:{width:"auto"},onClick:r,children:"Edit"})]}),e.jsxs("div",{className:"column",style:{marginTop:"1rem"},children:[e.jsxs("div",{children:[e.jsx("p",{className:"p-h3",children:"Nom et prenom"}),e.jsxs("p",{className:"p text-black-start",children:[t.representantNom," ",t.representantPrenom]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"p-h3",children:"Email"}),e.jsx("p",{className:"p text-black-start",children:t.representantEmail})]}),e.jsxs("div",{children:[e.jsx("p",{className:"p-h3",children:"Adresse"}),e.jsx("p",{className:"p text-black-start",children:t.representantAdresse})]}),e.jsxs("div",{children:[e.jsx("p",{className:"p-h3",children:"Code postal"}),e.jsx("p",{className:"p text-black-start",children:t.representantCodePostal})]}),e.jsxs("div",{children:[e.jsx("p",{className:"p-h3",children:"Ville"}),e.jsx("p",{className:"p text-black-start",children:t.representantVille})]})]})]}),w=C.div`
	.inline-component-form {
		display: flex;
		justify-content: space-between;
		flexwrap: wrap;
		gap: 10px;
	}
	.column-content-form {
		flex: 1 1 48%;
		display: flex;
		flex-direction: column;
		justify-content: start;
	}
	.input-inline {
		width: 100%;
	}
	.no-height {
		height: 0;
		margin-top: 0;
	}
	@media (min-width: 768px) {
		.input-inline {
			width: 85%;
		}
	}
`;b.setAppElement("#root");const q=({isOpen:t,onRequestClose:r,onSubmit:j,user:a})=>{const{control:l,handleSubmit:x,formState:{errors:s,isValid:N},reset:f,getValues:g}=v({mode:"onChange"}),[y,c]=u.useState(!1),[d,p]=u.useState(""),i=async()=>{var n;try{c(!0);const h=g();await j(h),r()}catch(h){p(((n=h.response)==null?void 0:n.data.message)||"Une erreur s'est produite.")}finally{c(!1)}},m=()=>{f(),r()};return e.jsx(b,{isOpen:t,onRequestClose:r,contentLabel:"Confirmation d'acceptation",className:"modal",children:e.jsxs(w,{children:[e.jsx("p",{className:"p-h1",children:"Profil"}),e.jsx("p",{className:"p-h3 text-center",children:"Editer mon profile"}),d&&e.jsx("p",{className:"text-center p-label p-error",children:d}),e.jsx("form",{onSubmit:x(i),children:e.jsxs("div",{className:"column",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"inline-component-form",children:[e.jsxs("div",{className:"column-content-form",children:[e.jsx("p",{className:`p-label ${s.representantNom?"p-error":""}`,children:"Nom du réprésentant"}),e.jsx(o,{name:"representantNom",control:l,defaultValue:a.representantNom,render:({field:n})=>e.jsx("input",{className:"input input-inline",...n}),rules:{required:"Le nom du representant est requis."}}),s.representantNom&&e.jsx("p",{className:"p-error no-height",children:s.representantNom.message})]}),e.jsxs("div",{className:"column-content-form",children:[e.jsx("p",{className:`p-label ${s.representantPrenom?"p-error":""}`,children:"Prenom du réprésentant"}),e.jsx(o,{name:"representantPrenom",control:l,defaultValue:a.representantPrenom,render:({field:n})=>e.jsx("input",{className:"input  input-inline",...n}),rules:{required:"La prenom du réprésentant est requis."}}),s.representantPrenom&&e.jsx("p",{className:"p-error no-height",children:s.representantPrenom.message})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:`p-label ${s.representantEmail?"p-error":""}`,children:"Email du réprésentant"}),e.jsx(o,{name:"representantEmail",control:l,defaultValue:a.representantEmail,render:({field:n})=>e.jsx("input",{className:"input",...n}),rules:{required:"L'email du réprésentant est requis.",pattern:{value:/^\S+@\S+$/i,message:"Cet email n'est pas valid."}}}),s.representantEmail&&e.jsx("p",{className:"p-error no-height",children:s.representantEmail.message})]}),e.jsxs("div",{children:[e.jsx("p",{className:`p-label ${s.representantAdresse?"p-error":""}`,children:"Adresse du réprésentant"}),e.jsx(o,{name:"representantAdresse",control:l,defaultValue:a.representantAdresse,render:({field:n})=>e.jsx("input",{type:"text",className:"input",...n}),rules:{required:"L'adresse du representant est requis."}}),s.representantAdresse&&e.jsx("p",{className:"p-error no-height",children:s.representantAdresse.message})]}),e.jsxs("div",{className:"inline-component-form",children:[e.jsxs("div",{className:"column-content-form",children:[e.jsx("p",{className:`p-label ${s.representantCodePostal?"p-error":""}`,children:"Code postal du réprésentant"}),e.jsx(o,{name:"representantCodePostal",control:l,defaultValue:a.representantCodePostal,render:({field:n})=>e.jsx("input",{type:"text",className:"input  input-inline",...n}),rules:{required:"Le code postal du representant est requis."}}),s.representantCodePostal&&e.jsx("p",{className:"p-error no-height",children:s.representantCodePostal.message})]}),e.jsxs("div",{className:"column-content-form",children:[e.jsx("p",{className:`p-label ${s.representantVille?"p-error":""}`,children:"Ville du réprésentant"}),e.jsx(o,{name:"representantVille",control:l,defaultValue:a.representantVille,render:({field:n})=>e.jsx("input",{type:"text",className:"input  input-inline",...n}),rules:{required:"La ville du representant est requis."}}),s.representantVille&&e.jsx("p",{className:"p-error no-height",children:s.representantVille.message})]})]})]}),e.jsxs("div",{className:"justify-space-between",style:{marginTop:"10px"},children:[e.jsx("button",{onClick:i,className:"btn-secondary",disabled:!N,children:y?e.jsx("img",{src:P,alt:"chargement...",style:{width:"40px"}}):"Valider"}),e.jsx("button",{onClick:m,className:"btn-primary",children:"Annuler"})]})]})})]})})},A=C.div`
	.inline-component-form {
		display: flex;
		justify-content: space-between;
		flexwrap: wrap;
		gap: 10px;
	}
	.column-content-form {
		flex: 1 1 48%;
		display: flex;
		flex-direction: column;
		justify-content: start;
	}
	.input-inline {
		width: 100%;
	}
	.no-height {
		height: 0;
		margin-top: 0;
	}
	@media (min-width: 768px) {
		.input-inline {
			width: 85%;
		}
	}
`;b.setAppElement("#root");const k=({isOpen:t,onRequestClose:r,onSubmit:j,user:a})=>{const{control:l,handleSubmit:x,formState:{errors:s,isValid:N},reset:f,getValues:g}=v({mode:"onChange"}),[y,c]=u.useState(!1),[d,p]=u.useState(""),i=async()=>{var n;try{c(!0);const h=g();await j(h),r()}catch(h){p(((n=h.response)==null?void 0:n.data.message)||"Une erreur s'est produite.")}finally{c(!1)}},m=()=>{f(),r()};return e.jsx(b,{isOpen:t,onRequestClose:r,contentLabel:"Confirmation d'acceptation",className:"modal",children:e.jsxs(A,{children:[e.jsx("p",{className:"p-h1",children:"Entreprise"}),e.jsx("p",{className:"p-h3 text-center",children:"Editer mon entreprise"}),d&&e.jsx("p",{className:"text-center p-label p-error",children:d}),e.jsxs("form",{onSubmit:x(i),children:[e.jsxs("div",{children:[e.jsx("p",{className:"p-label",children:"Raison social"}),e.jsx(o,{name:"raisonSocial",control:l,defaultValue:a.raisonSocial,render:({field:n})=>e.jsx("input",{className:"input",...n}),rules:{required:"Raison social is required"}}),s.raisonSocial&&e.jsx("p",{className:"p-error  no-height",children:s.raisonSocial.message})]}),e.jsxs("div",{children:[e.jsx("p",{className:"p-label",children:"Adresse"}),e.jsx(o,{name:"entrepriseAdresse",control:l,defaultValue:a.entrepriseAdresse,render:({field:n})=>e.jsx("input",{className:"input",...n}),rules:{required:"L'adresse de l'entreprise est requis"}}),s.entrepriseAdresse&&e.jsx("p",{className:"p-error  no-height",children:s.entrepriseAdresse.message})]}),e.jsxs("div",{className:"inline-component-form",children:[e.jsxs("div",{className:"column-content-form",children:[e.jsx("p",{className:`p-label ${s.entrepriseCodePostal?"p-error":""}`,children:"Code postal"}),e.jsx(o,{name:"entrepriseCodePostal",control:l,defaultValue:a.entrepriseCodePostal,render:({field:n})=>e.jsx("input",{className:"input  input-inline",...n}),rules:{required:"La code postal de l'entreprise est requis."}}),s.entrepriseCodePostal&&e.jsx("p",{className:"p-error  no-height",children:s.entrepriseCodePostal.message})]}),e.jsxs("div",{className:"column-content-form",children:[e.jsx("p",{className:"p-label",children:"Ville"}),e.jsx(o,{name:"entrepriseVille",control:l,defaultValue:a.entrepriseVille,render:({field:n})=>e.jsx("input",{className:"input  input-inline",...n}),rules:{required:"La ville l'entreprise est requis."}}),s.entrepriseVille&&e.jsx("p",{className:"p-error  no-height",children:s.entrepriseVille.message})]})]}),e.jsxs("div",{className:"justify-space-between",style:{marginTop:"15px"},children:[e.jsx("button",{onClick:i,className:"btn-secondary",disabled:!N,children:y?e.jsx("img",{src:P,alt:"chargement...",style:{width:"40px"}}):"Valider"}),e.jsx("button",{onClick:m,className:"btn-primary",children:"Annuler"})]})]})]})})},R=()=>{const[t,r]=u.useState(!1),[j,a]=u.useState(!1),{data:l,updatedProfilForCompany:x}=V(),s=l.infosUsers,N=async p=>{const i={...s},m=s._id;Object.assign(i,p);try{await x(m,i)}catch(n){throw n}},f=async p=>{const i={...s},m=s._id;Object.assign(i,p);try{await x(m,i)}catch(n){throw n}},g=()=>{r(!0)},y=()=>{r(!1)},c=()=>{a(!0)},d=()=>{a(!1)};return e.jsxs("div",{className:"justify-space-between",style:{alignItems:"inherit"},children:[e.jsxs(e.Fragment,{children:[e.jsx(E,{onOpenEditModalProfil:g,user:s}),e.jsx(q,{user:s,isOpen:t,onRequestClose:y,onSubmit:N})]}),e.jsxs(e.Fragment,{children:[e.jsx(S,{user:s,onOpenEditModalCompany:c}),e.jsx(k,{user:s,isOpen:j,onRequestClose:d,onSubmit:f})]})]})};export{R as default};
