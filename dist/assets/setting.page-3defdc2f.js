import{j as e,u as b,C as c,L as g,k as v,R as N}from"./index-aadf72d3.js";import{M as f}from"./index-4cabefca.js";import"./warning-113e5435.js";const y=({openFormModal:t,user:r})=>e.jsx("div",{className:"justify-space-between",children:e.jsxs("div",{className:"card-mini",children:[e.jsxs("div",{className:"justify-space-between",children:[e.jsx("p",{className:"p-h2 text-black-start",children:"Profil"}),e.jsx("button",{className:"btn-secondary",style:{width:"auto"},onClick:t,children:"Edit"})]}),e.jsxs("div",{className:"column",style:{marginTop:"1rem"},children:[e.jsxs("div",{children:[e.jsx("p",{className:"p-h3",children:"Nom"}),e.jsx("p",{className:"p text-black-start",children:r.nom})]}),e.jsxs("div",{children:[e.jsx("p",{className:"p-h3",children:"Prenom"}),e.jsx("p",{className:"p text-black-start",children:r.prenom})]}),e.jsxs("div",{children:[e.jsx("p",{className:"p-h3",children:"Email"}),e.jsx("p",{className:"p text-black-start",children:r.email})]}),e.jsxs("div",{children:[e.jsx("p",{className:"p-h3",children:"RÃ´les"}),e.jsx("p",{className:"p text-black-start",children:r.roles})]})]})]})});f.setAppElement("#root");const S=({isOpen:t,isLoading:r,errorRequest:i,onRequestClose:o,onSubmit:d,user:l})=>{const{control:n,handleSubmit:j,formState:{errors:a,isValid:u},reset:h,getValues:m}=b({mode:"onChange"}),p=()=>{const s=m();d(s)},x=()=>{h(),o()};return e.jsxs(f,{isOpen:t,onRequestClose:o,contentLabel:"Confirmation d'acceptation",className:"modal",children:[e.jsx("p",{className:"p-h1",children:"Profil"}),e.jsx("p",{className:"p-h3 text-center",children:"Editer mon profile"}),i&&e.jsx("p",{className:"text-center p-label p-error",children:i}),e.jsxs("form",{onSubmit:j(p),children:[e.jsx("div",{className:"data-ignores",children:e.jsx(c,{name:"_id",control:n,defaultValue:l._id,render:({field:s})=>e.jsx("input",{type:"hidden",className:"input",...s})})}),e.jsxs("div",{children:[e.jsx("p",{className:`p-label ${a.nom?"p-error":""}`,children:"Nom"}),e.jsx(c,{name:"nom",control:n,defaultValue:l.nom,render:({field:s})=>e.jsx("input",{className:"input",...s}),rules:{required:"Nom is required"}}),a.nom&&e.jsx("p",{className:"p-error",children:a.nom.message})]}),e.jsxs("div",{children:[e.jsx("p",{className:`p-label ${a.prenom?"p-error":""}`,children:"Prenom"}),e.jsx(c,{name:"prenom",control:n,defaultValue:l.prenom,render:({field:s})=>e.jsx("input",{className:"input",...s}),rules:{required:"prenom is required"}}),a.prenom&&e.jsx("p",{className:"p-error",children:a.prenom.message})]}),e.jsxs("div",{children:[e.jsx("p",{className:`p-label ${a.email?"p-error":""}`,children:"Email"}),e.jsx(c,{name:"email",control:n,defaultValue:l.email,render:({field:s})=>e.jsx("input",{className:"input",...s}),rules:{required:"Email is required",pattern:{value:/^\S+@\S+$/i,message:"Invalid email address"}}}),a.email&&e.jsx("p",{className:"p-error",children:a.email.message})]}),e.jsx("p",{className:"p-label",children:"Roles"}),e.jsx(c,{name:"roles",control:n,defaultValue:l.roles,render:({field:s})=>e.jsx("input",{type:"text",disabled:!0,className:"input",...s})}),e.jsxs("div",{className:"justify-space-between",children:[e.jsx("button",{onClick:p,className:"btn-secondary",disabled:!u,children:r?e.jsx("img",{src:g,alt:"chargement...",style:{width:"40px"}}):"Valider"}),e.jsx("button",{onClick:x,className:"btn-primary",children:"Annuler"})]})]})]})},V=()=>{const{data:t,updatedProfil:r}=v(),i=t.infosUsers,[o,d]=N.useState(!1),[l,n]=N.useState(""),[j,a]=N.useState(!1),u=async p=>{var x;try{d(!0),await r(p),m()}catch(s){console.log(s),n(((x=s.response)==null?void 0:x.data.message)||"Une erreur s'est produite.")}finally{d(!1)}},h=()=>{a(!0)},m=()=>{a(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(y,{openFormModal:h,user:i}),e.jsx(S,{user:i,onSubmit:u,isLoading:o,isOpen:j,errorRequest:l,onRequestClose:m})]})};export{V as default};
